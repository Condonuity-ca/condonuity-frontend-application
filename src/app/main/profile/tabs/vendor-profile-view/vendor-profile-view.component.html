<!-- <div *ngIf="isDataAvailableToLoad" id="profile" class="page-layout"> -->
<!-- <div id="about" class=" pr-8   pb-32" fxLayout="row wrap" [ngClass.xl]="'pt-32 p-20 pl-32'" [ngClass.lg]="'pt-32 p-20 pl-32'"
  [ngClass.md]="' pt-32 p-20 pl-32'" [ngClass.sm]="'pt-32 p-8 pl-16 pr-0'" [ngClass.xs]="'pl-8 pt-8'"> -->

  <div id="about" class="pb-32" fxLayout="row wrap" fxFlex="100" [ngClass.xl]="'pt-16 pr-32 pl-32'" [ngClass.lg]="'pt-16 pr-32 pl-32'"
    [ngClass.md]="'pt-16 pr-32 pl-32'" [ngClass.sm]="'px-16'" [ngClass.xs]="'pr-16 pl-16'">

  <div class="about-content" fxLayout="column" fxFlex="100" fxFlex.gt-sm="100" fxFlex.gt-md="100"
    class="mr-24 mt-0 mb-8">
    <div fxLayout="column" fxFlex="100" fxLayoutAlign="end end" fxLayoutAlign.xs="start" fxFlex.xs="100"
      fxLayout.xs="column" class="mt-0 mb-8" [ngClass.xs]="'mt-16'">
      <div fxLayout="row" fxFlex.md="100" *ngIf="previousScreen == 0">
        <a class="cursor" [routerLink]="['/browseVendors']"> <span class="font-weight-600">
            <mat-icon aria-hidden="false" aria-label="current project" class="zoom s-16 condo-red-text">arrow_back
            </mat-icon> BACK TO BROWSE CONTRACTORS
          </span></a>
      </div>

      <div fxLayout="row" fxFlex.md="100" *ngIf="previousScreen == 1">
        <a class="cursor" [routerLink]="['/myreview']"> <span class="font-weight-600">
            <mat-icon aria-hidden="false" aria-label="current project" class="zoom s-16 condo-red-text">arrow_back
            </mat-icon> BACK TO MY REVIEWS
          </span></a>
      </div>

      <div fxLayout="row" fxFlex.md="100" *ngIf="previousScreen == 2 && currentUser.userType == 3">
        <a class="cursor" [routerLink]="['/support/newRegistration']"> <span class="font-weight-600">
            <mat-icon aria-hidden="false" aria-label="current project" class="zoom s-16 condo-red-text">arrow_back
            </mat-icon> BACK TO NEW REGISTRATION
          </span></a>
      </div>

      <div fxLayout="row" fxFlex.md="100" *ngIf="previousScreen == 3 && currentUser.userType == 3">
        <a class="cursor" [routerLink]="['/support/clientManagement']"> <span class="font-weight-600">
            <mat-icon aria-hidden="false" aria-label="current project" class="zoom s-16 condo-red-text">arrow_back
            </mat-icon> BACK TO CLIENT MANAGEMENT
          </span></a>
      </div>


    </div>
  </div>

  <!-- Delete this finally once edit works in popup -->
  <div class="about-content" fxLayout="column" fxFlex="100" fxFlex.gt-sm="100" fxFlex.md="100" fxFlex.sm="100" fxHide>
    <div class="mat-elevation-z p-16 mr-8 " [ngClass.sm]="'mt-32'">
      <div class="" fxLayout="row" fxLayoutAlign="space-between flex-start">
        <div fxLayout="row ">
          <button class="mat-flat-button font-weight-300 condo-red-400 mat-button" [ngClass.md]="'mt-16'"
            [routerLink]="'/profile/editVendorProfile/'">EDIT PROFILE</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Delete this finally once edit works in popup -->



  <!-- Company Info Section Starts -->
  <div *ngIf="vendorDetails != null" class="" fxLayout="row" fxFlex="100" fxLayout.sm="column" fxLayout.xs="column">
    <!-- Left Section Starts -->
    <div fxFlex="100" fxLayout="column" class="mat-card mat-elevation-z" fxFlex.sm="100" fxFlex.xs="100"
      [ngClass.xl]="'p-32 pb-24 mt-16'" [ngClass.lg]="'p-32 pb-24 mt-16'" [ngClass.md]="'p-32 pb-24 mt-16'" [ngClass.sm]="'p-32 mb-8 mr-4 mt-0'"
      [ngClass.xs]="'p-16 mt-8'">
      <div class="" fxFlex="100" fxLayout="row">
        <div class="mat-card mat-elevation-z" fxFlex="100">
          <div *ngIf="!isView || currentUser.userType == 3" class="h4 condo-red-text text-right font-weight-600" [ngClass.xs]="'pr-12 pt-12'">
            <a *ngIf="shouldEnableEdit" (click)="openComponyDetailsDialog()" class="cursor">
              <mat-icon class="s-16">edit</mat-icon> EDIT
            </a>
          </div>
          <div class="" fxLayout="row" fxLayoutAlign="start flex-start" fxLayout.xs="column">

            <div class="img-hover-vendor" [ngClass.xs]="'mb-12 '">
              <img [src]="profileImageUrl" *ngIf="profileImageUrl" class="border-radius-100 w-80 h-80">
              <img *ngIf="profileImageUrl == ''" class="border-radius-100 w-80 h-80" src="assets/images/no-pic.jpg">
            </div>

            <div class="pr-16 ml-24" fxFlex="70" fxFlex.xs="100" fxlayout="row wrap">
              <div class="h2 text-bold" [ngClass.xs]="'text-flex-start'">{{vendorDetails.companyName}}</div>
              <div *ngIf="currentUser.userType == 3" class="mt-4 mb-0" [ngClass.xs]="'text-flex-start'">
                Legal Name: {{vendorDetails.legalName}}</div>

              <div *ngIf="vendorDetails.vendorTags.length > 0" class="tag ng-star-inserted h5 font-weight-100"
                fxlayout="row wrap" fxlayoutalign="start flex-start">
                <div class="mt-8 " fxLayout="row wrap"><span *ngFor="let tag of vendorDetails.vendorTags"
                    class="mb-16"><span class="text-boxed mb-12">{{tag.tagName}}</span></span>
                </div>
              </div>

              <div *ngIf="currentUser.userType == 3" class="h5 font-weight-600 cursor mt-8 " fxlayout="row wrap"
                fxlayoutalign="start flex-start">
                <div *ngIf="currentProfileMode == 1 && accountStatus == 0">Status: <span
                    class="condo-green-text">Active</span></div>
                <div *ngIf="currentProfileMode == 1 && accountStatus == 1">Status: <span
                    class="condo-red-text">Inactive</span></div>
              </div>

            </div>
            <div class="cursor" fxLayout="column" fxFlex="30" fxLayoutAlign="end end" fxFlex.xs="100"
              fxLayout.xs="column" [ngClass.xs]="'mt-12'" (click)="viewRating()">
              <div *ngIf="vendorRating != null" fxLayout="row" fxFlex.md="100">
                <div fxLayout="row" *ngFor="let rating of vendorRating.averageRating.ratingStar">
                  <mat-icon *ngIf="rating == 'fullStar'" class="s-24 amber-fg">star</mat-icon>
                  <mat-icon *ngIf="rating == 'halfStar'" class="s-24 amber-fg">star_half</mat-icon>
                  <mat-icon *ngIf="rating == 'noStar'" class="s-24 amber-fg">star_border</mat-icon>
                </div>
                <div class="ml-8  h2 text-bold">{{vendorDetails.rating}}</div>
              </div>
              <a class="h5 font-weight-600 cursor" fxLayout.xs="column" [ngClass.xs]="'mt-12'">REVIEWS AND RATINGS</a>
            </div>
          </div>
          <div class="h2 " [ngClass.lg]="'mb-24'" [ngClass.md]="'mb-24'" [ngClass.sm]="'mb-24'" [ngClass.xs]="'mb-24'">
          </div>
          <mat-divider></mat-divider>

          <div *ngIf="vendorDetails != null" class="" fxLayout="column">
            <div class="mt-20">
              <div>
                <div class="h5 condo-gray-text">SERVICED CITIES</div>
                <div class="h4 mb-16"><span *ngFor="let city of vendorDetails.vendorServicesCities;let i=index;"><span
                      *ngIf="i>0">, </span>{{city}}</span></div>
              </div>
              <div [ngClass.xl]="'mt-24 mb-16'" [ngClass.lg]="'mt-24 mb-16'" [ngClass.md]="'mt-16 mb-0'" [ngClass.sm]="'mt-0 mb-0'"
                [ngClass.xs]="'mt-0 mb-0'">
                <div class="h5 condo-gray-text ">DESCRIPTION</div>
                <div class="h4  line-height-24 angular-with-newlines">{{vendorDetails.description}}</div>
              </div>
            </div>
            <div class="h2" [ngClass.xl]="'mb-0'" [ngClass.lg]="'mb-0'" [ngClass.md]="'mb-0'" [ngClass.sm]="'mb-0'" [ngClass.xs]="'mb-4'">

              <div *ngIf="shouldShowAttachments == true" fxLayout.lg="row" fxLayout.md="row" fxLayout.sm="row"
                fxLayout.xs="column" class="my-16" fxLayoutAlign.xs="start" fxLayoutAlign.lg="space-between flex-start"
                fxLayoutAlign.md="space-between flex-start" fxLayoutAlign.sm="space-between flex-start" fxFlex="1 0 auto">
                <div fxFlex.lg="100" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100" fxLayout.lg="row" fxLayout.md="row"
                  fxLayout.sm="row" fxLayout.xs="column" class="upload-button">
                  <div fxLayout="row" class="mb-12">
                    <div class="h4 line-height-28 mb-8" fxLayout="row" fxLayoutAlign="flex-start flex-start" fxFlex="1 0 auto">

                      <div>
                        <div *ngFor="let docAttachment of vendorDetails.vendorRegistrationFiles" class=""
                          fxLayout="column" (click)="fileClicked(docAttachment)">
                          <div>
                            <mat-icon class="s-16 font-weight-600 mat-icon mr-8" style="vertical-align: flex-start">
                              file_copy
                            </mat-icon> <a class="cursor">{{docAttachment.fileName}}</a> <span
                              class="condo-gray-text ml-16">{{docAttachment.fileSize}}</span>
                          </div>
                        </div>
                        <div *ngIf="vendorDetails.vendorRegistrationFiles.length == 0" class="" fxLayout="row">
                          <div class="condo-gray-text text-italic text-flex-start">No documents available</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <div *ngIf="currentProfileMode == 1 && accountStatus == 1 && currentUser.userType == 3" class="pr-0"
              fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-8">
                <button mat-button class="mat-flat-button condo-red-700"
                  (click)="updateUserAccountStatus(1)">ACTIVATE</button>
              </div>
            </div>

            <div *ngIf="currentProfileMode == 1 && accountStatus == 0 && currentUser.userType == 3" class="pr-0"
              fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-8">
                <button mat-button class="mat-flat-button" color="accent"
                  (click)="updateUserAccountStatus(2)">DEACTIVATE</button>
              </div>
            </div>

            <div *ngIf="currentProfileMode == 0 && accountStatus == 1 && currentUser.userType == 3" class="pr-0"
              fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-8">
                <button mat-button class="mat-flat-button condo-red-700 mr-16"
                  (click)="updateUserAccountStatus(3)">APPROVE</button>
                <button *ngIf="accountApprovalStatus == 0" mat-button class="mat-flat-button" color="accent"
                  (click)="updateUserAccountStatus(4)">DECLINE</button>
              </div>
            </div>



            <div *ngIf="currentProfileMode == 0 && accountStatus == 0 && currentUser.userType == 3" class="pr-0"
              fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-8">
                <div class="h5 font-weight-600 cursor mt-12 condo-green-text" [ngClass.xs]="'mt-4 text-flex-start'">APPROVED
                </div>
              </div>
            </div>

            <div *ngIf="currentProfileMode == 0 && accountStatus == 2 && currentUser.userType == 3" class="pr-0"
              fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-16">
                <div class="h5 font-weight-600 cursor mt-12 condo-green-text" [ngClass.xs]="'mt-4 text-flex-start'">DECLINED
                </div>
              </div>
            </div>

            <div *ngIf="currentUser.userType == 1" class="pr-0" fxFlex="30" fxFlex.xs="100">
              <div style="" fxLayout="row wrap" fxLayoutAlign="end end" class="mt-8">
                <i *ngIf="isFavoriteVendor != null && isFavoriteVendor == 'false'" matTooltip="Add Preferred"
                  matTooltipPosition="above" class="fa fa-ban cursor condo-red-text fav-icon"
                  (click)="updateFavoriteVendor(1)">favorite_border</i>
                <i *ngIf="isFavoriteVendor != null && isFavoriteVendor == 'true'"
                  class="fa fa-ban cursor condo-red-text fav-icon-active" (click)="updateFavoriteVendor(2)"
                  matTooltip="Remove Preferred" matTooltipPosition="above">favorite</i>
              </div>
            </div>

          </div>




        </div>
      </div>
    </div>
    <!-- Left Section Ends -->
    <!-- Right Section Starts -->
    <div fxFlex="30" fxFlex.md="30" fxFlex.sm="100" fxFlex.xs="100" [ngClass.xs]="'px-16 mt-16 pt-16'"
      [ngClass.sm]="'ml-0 mr-8 p-32 pb-8 mt-16 pt-8'" [ngClass.md]="'ml-16 mr-24 p-48 mt-16 pt-32'"
      [ngClass.lg]="'ml-16 mr-24 p-48 mt-16 pt-32'" [ngClass.xl]="'ml-16 mr-24 p-48 mt-16 pt-32'" class="mat-card mat-elevation-z">
      <!-- Makde account Dormant hided for 1st version -->
      <div class="mat-card mat-elevation-z p-16 mr-24 condo-red" fxHide [ngClass.sm]="'mt-32'">
        <div class="" fxLayout="row" fxLayoutAlign="space-between flex-start" fxLayout.md="column">
          <div>
            <a class="condo-white-text h5 ml-16 cursor" [ngClass.md]="'text-flex-start'">
              <mat-icon class="s-20 mr-4" style="vertical-align: middle">refresh</mat-icon>MAKE ACCOUNT DORMANT
            </a>
          </div>
          <div fxLayout="row">
            <button class="mat-flat-button font-weight-500 condo-red-400 text-bold mat-button" [ngClass.md]="'mt-16'"
              [routerLink]="'../editVendorProfile/'">EDIT PROFILE</button>
          </div>
        </div>
      </div>
      <!-- Makde account Dormant hided for 1st version -->
      <div fxLayout="column">
        <div *ngIf="!isView" class="h4 condo-red-text text-right font-weight-600"><a (click)="openComponyInfoDialog()"
            class="cursor">
            <mat-icon class="s-16">edit</mat-icon> EDIT
          </a>
        </div>
        <h2 class="mt-12 mb-32 h3 font-weight-600">COMPANY INFO</h2>
        <div class="" fxLayout="column">

          <div class="mb-24" [ngClass.md]="'mb-16'">
            <div class="h5 pb-0 condo-gray-text">ESTABLISHED</div>
            <h3 class="mt-4 mb-0">{{vendorDetails.companyEstablishedDate}}</h3>
          </div>

          <div class="" [ngClass.xl]="'mb-24'" [ngClass.lg]="'mb-24'" [ngClass.md]="'mb-16'" [ngClass.sm]="'mb-16'" [ngClass.xs]="'mb-16'">
            <div class="h5 condo-gray-text">TOTAL EMPLOYEES</div>
            <h3 class="mt-4 mb-0">{{vendorDetails.employeesCount}}</h3>
          </div>

          <div class="mb-24" [ngClass.sm]="'mb-0'" [ngClass.xs]="'mb-0'">
            <div class="h5 condo-gray-text">ANNUAL SALES</div>
            <h3 class="mt-4 mb-0">{{vendorDetails.annualRevenue | currency:'CAD'}}</h3>
          </div>
        </div>
      </div>
    </div>
    <!-- Right Section Ends -->
  </div>
  <!-- Company Info Section Ends -->




  <!-- Accordion Starts -->
  <div *ngIf="vendorDetails != null" class="about-content   mat-elevation-z" fxLayout="column" fxFlex="100"
    fxFlex.gt-sm="100" fxFlex.gt-md="100" [ngClass.xl]="'mr-24 mt-24'" [ngClass.lg]="'mr-24 mt-24'" [ngClass.md]="'mr-24 mt-24'"
    [ngClass.sm]="'mr-8 mt-0'" [ngClass.xs]="''">
    <mat-accordion class="example-headers-align mat-elevation-z expanded" multi>
      <!-- Contact information section starts -->
      <mat-expansion-panel class="mt-24 mat-elevation-z ">
        <mat-expansion-panel-header class="condo-red-300">
          <mat-panel-title class="h3 font-weight-600">
            CONTACT INFORMATION
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="mat-card mat-elevation-z  project-list" [ngClass.xl]="'pt-16 mr-24'" [ngClass.lg]="'pt-16 mr-24'" [ngClass.md]="'pt-16 mr-24'"
          [ngClass.sm]="'pt-16 mr-24'" [ngClass.xs]="'pt-16'">
          <div *ngIf="!isView" class="h4 condo-red-text text-right font-weight-600"><a (click)="openContactInfoDialog()"
              class="cursor">
              <mat-icon class="s-16">edit</mat-icon> EDIT
            </a>
          </div>
          <div fxLayout="column">
            <div fxLayout="row" class="" fxLayoutAlign="start flex-start" fxFlex="1 0 auto">
              <div class="h3 font-weight-600">COMPANY INFO</div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="my-16" fxLayoutAlign="start flex-start" fxLayoutAlign.xs="start"
              fxFlex="1 0 auto">
              <div fxFlex="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">ADDRESS</div>
                <div class="h4">{{vendorDetails.address}}</div>
              </div>
              <div fxFlex="20" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">CITY</div>
                <div class="h4">{{vendorDetails.city}}</div>
              </div>
              <div fxFlex="20" fxFlex.md="30" fxFlex.sm="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">PROVINCE</div>
                <div class="h4">{{vendorDetails.province}}</div>
              </div>
              <div fxFlex="20" fxFlex.xs="100">
                <div class="h5 condo-gray-text mb-4">POSTAL CODE</div>
                <div class="h4">{{vendorDetails.postalCode}} </div>
              </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="my-16" [ngClass.xs]="'mt-0 mb-0'"
              fxLayoutAlign="start flex-start" fxLayoutAlign.xs="start" fxFlex="1 0 auto">
              <div fxFlex="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">PHONE</div>
                <div class="h4">{{vendorDetails.phoneNumber}}</div>
              </div>
              <div fxFlex="20" fxFlex.md="30" fxFlex.sm="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">EMAIL</div>
                <div class="h4"><a>{{vendorDetails.email}}</a></div>
              </div>
              <div fxFlex="20" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">FAX</div>
                <div class="h4">{{vendorDetails.faxNumber}}</div>
              </div>
              <div fxFlex="20" fxFlex.xs="100">
                <div class="h5 condo-gray-text mb-4">WEBSITE</div>
                <div class="h4"><a>{{vendorDetails.website}}</a></div>
              </div>
            </div>
            <mat-divider class="mat-divider " [ngClass.xl]="'mt-24 mb-32'"  [ngClass.lg]="'mt-24 mb-32'" [ngClass.md]="'mt-24 mb-32'"
              [ngClass.sm]="'mt-24 mb-32'" [ngClass.xs]="'mb-24 mt-24'"></mat-divider>
            <div fxLayout="row" class="" fxLayoutAlign="start flex-start" fxFlex="1 0 auto">
              <div class="h3 font-weight-600">CONTACT PERSON</div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="my-16" [ngClass.xs]="'mb-0'" fxLayoutAlign="start flex-start"
              fxLayoutAlign.xs="start" fxFlex="1 0 auto">
              <div fxFlex="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">CONTACT NAME</div>
                <div class="h4">{{vendorDetails.contactPerson}}</div>
              </div>
              <div fxFlex="30" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">PHONE</div>
                <div class="h4">{{vendorDetails.contactPersonPhone}}</div>
              </div>
              <div fxFlex="20" fxFlex.sm="40" fxFlex.xs="100">
                <div class="h5 condo-gray-text mb-4">EMAIL</div>
                <div class="h4"><a>{{vendorDetails.contactPersonEmail}}</a></div>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
      <!-- Contact information section ends -->

      <!-- Insurance, Services information section starts -->
      <mat-expansion-panel class="mt-24 mat-elevation-z">
        <mat-expansion-panel-header class="condo-red-300">
          <mat-panel-title class="h3 font-weight-600">
            INSURANCE, SERVICES AND CERTIFICATIONS
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="mat-card mat-elevation-z project-list" [ngClass.xl]="'pt-16 mr-24'" [ngClass.lg]="'pt-16 mr-24'" [ngClass.md]="'pt-16 mr-24'"
          [ngClass.sm]="'pt-16 mr-24'" [ngClass.xs]="'pt-16'">
          <div *ngIf="!isView" class="h4 condo-red-text text-right font-weight-600"><a
              (click)="openInsuranceInfoDialog()" class="cursor">
              <mat-icon class="s-16">edit</mat-icon> EDIT
            </a>
          </div>

          <div *ngIf="vendorDetails != null" fxLayout="column" fxLayoutAlign="flex-start">
            <div fxLayout="row" fxLayout.xs="column" class="my-16" fxLayoutAlign="start flex-start" fxLayoutAlign.xs="start"
              fxFlex="1 0 auto">
              <div fxFlex="20" fxFlex.sm="20" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">INSURANCE</div>
                <div *ngIf="vendorDetails.insureDetails.insurance == true" class="h4">YES</div>
                <div *ngIf="vendorDetails.insureDetails.insurance == false" class="h4">NO</div>
              </div>
              <div fxFlex="40" fxFlex.sm="40" fxFlex.xs="100" [ngClass.xs]="'mb-16'"
                *ngIf="vendorDetails.insureDetails.insurance == true">
                <div class="h5 condo-gray-text mb-4">INSURANCE COMPANY</div>
                <div class="h4">{{vendorDetails.insureDetails.insuranceCompany}}</div>
              </div>
              <div fxFlex="15" fxFlex.sm="15" fxFlex.xs="100" [ngClass.xs]="'mb-16'"
                *ngIf="vendorDetails.insureDetails.insurance == true">
                <div class="h5 condo-gray-text mb-4">LIABILITY</div>
                <div class="h4">{{vendorDetails.insureDetails.insuranceLiability | currency:'CAD'}}</div>
              </div>
              <div fxFlex="25" fxFlex.sm="25" fxFlex.xs="100" [ngClass.xs]="'mb-16'"
                *ngIf="vendorDetails.insureDetails.insurance == true">
                <div class="h5 condo-gray-text mb-4">POLICY EXPIRY DATE</div>
                <div class="h4">{{vendorDetails.insureDetails.insuranceExpiryDate}} </div>
              </div>
            </div>
            <div fxLayout="row" class="my-16" fxLayoutAlign="start flex-start" fxFlex="1 0 auto">
              <div fxFlex="20" fxFlex.sm="20" fxFlex.xs="40">
                <div class="h5 condo-gray-text mb-4">BONDED</div>
                <div class="h4" *ngIf="vendorDetails.insureDetails.insuranceBonded == 1">YES</div>
                <div class="h4" *ngIf="vendorDetails.insureDetails.insuranceBonded == 0">NO</div>
              </div>
              <div fxFlex="20" fxFlex.sm="30" fxFlex.xs="60">
                <div class="h5 condo-gray-text mb-4">WSIB</div>
                <div class="h4">{{vendorDetails.insureDetails.insuranceNumber}}</div>
              </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="my-16" [ngClass.xs]="'mt-0 mb-0'" fxLayoutAlign="start top"
              fxFlex="1 0 auto">
              <div fxFlex="20" fxFlex.sm="33" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">SERVICES</div>
                <mat-list>
                  <mat-list-item *ngFor="let service of vendorDetails.services ; let i = index">{{i+1}}. {{service}}
                  </mat-list-item>
                </mat-list>
              </div>
              <div fxFlex="20" fxFlex.sm="33" [ngClass.xs]="'mb-16'">
                <div class="h5 condo-gray-text mb-4">PRODUCTS</div>
                <mat-list>
                  <mat-list-item *ngFor="let product of vendorDetails.products ; let i = index">{{i+1}}. {{product}}
                  </mat-list-item>
                </mat-list>
              </div>
              <div fxFlex="20" fxFlex.sm="33">
                <div class="h5 condo-gray-text mb-4">BRANDS</div>
                <mat-list>
                  <mat-list-item *ngFor="let brand of vendorDetails.brands ; let i = index">{{i+1}}. {{brand}}
                  </mat-list-item>
                </mat-list>
              </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="my-16" fxLayoutAlign="start top" fxFlex="1 0 auto">
              <div fxFlex="20" fxFlex.sm="33" [ngClass.xs]="'mb-24'">
                <div class="h5 condo-gray-text mb-4">LICENSES</div>
                <div class="h4" *ngIf="vendorDetails.licenses.length == 0">NA</div>

                <mat-list>
                  <mat-list-item *ngFor="let lisence of vendorDetails.licenses ; let i = index">{{i+1}}. {{lisence}}
                  </mat-list-item>
                </mat-list>
              </div>
              <div fxFlex="50" fxFlex.sm="66">
                <div class="h5 condo-gray-text mb-4">MEMBERSHIPS</div>
                <mat-list>
                  <mat-list-item *ngFor="let member of vendorDetails.memberships ; let i = index">{{i+1}}. {{member}}
                  </mat-list-item>
                </mat-list>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>

      <!-- Portfolio Section Starts -->
      <mat-expansion-panel class="mat-elevation-z mt-24">
        <mat-expansion-panel-header class="condo-red-300">
          <mat-panel-title class="h3 font-weight-600">
            PORTFOLIO
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div *ngIf="portfolioDetails">
          <!-- Add Portfolio Starts -->
          <div *ngIf="!isView" fxLayout="row" fxLayoutAlign="end" class="" [ngClass.xl]="'pt-24 mr-24 mb-12'" [ngClass.lg]="'pt-24 mr-24 mb-12'"
            [ngClass.md]="'pt-24 mr-24 mb-12'" [ngClass.sm]="'pt-24 mr-24 mb-12'" [ngClass.xs]="'pt-24 mr-0 mb-4'">
            <button class="mat-flat-button font-weight-300 condo-red-400 mat-button" [ngClass.md]="'mt-16'"
              (click)="openPortfolioDialog()">ADD PORTFOLIO</button>
          </div>
          <!-- Add Portfolio Ends -->
          <!-- Sorting Starts -->
          <div class="mat-card mat-elevation-z pt-12 mr-24 mb-16" fxLayout="row" fxLayoutAlign="end"
            fxLayoutAlign.xs="start start">
            <mat-button-toggle-group value="date" fxLayout.xs='row wrap'>
              <div fxLayoutAlign="start" class="line-height-30 mr-24 condo-gray-text font-weight-600">SORT BY : </div>
              <div class="condo-sorting" fxLayout="row wrap">
                <mat-button-toggle value="date" class="mat-stroked-button mat-primary mr-12 mb-12"
                  (click)="sortPortfolio('date')">
                  DATE
                </mat-button-toggle>
                <mat-button-toggle value="cost" class="mat-stroked-button mat-primary mr-12 mb-12 active"
                  (click)="sortPortfolio('cost')">
                  COST
                </mat-button-toggle>
                <mat-button-toggle value="duration" class="mat-stroked-button mb-12 mat-primary"
                  (click)="sortPortfolio('duration')">
                  DURATION
                </mat-button-toggle>
              </div>
            </mat-button-toggle-group>
          </div>

          <!-- Sorting Ends -->
          <mat-divider class="" [ngClass.xl]="'mb-16'" [ngClass.lg]="'mb-16'" [ngClass.md]="'mb-16'" [ngClass.sm]="'mb-16'"
            [ngClass.xs]="'mb-16'"></mat-divider>
          <div *ngFor="let portfolio of portfolioDetails; let i = index"
            class="mat-card mat-elevation-z pt-12  project-list" [ngClass.xl]="'mr-0'" [ngClass.lg]="'mr-0'" [ngClass.md]="'mr-24'"
            [ngClass.sm]="'mr-24'" [ngClass.xs]="'mr-0'">
            <div class="" fxLayout="row" fxLayoutAlign="space-between end">
              <div class="h3 font-weight-600">PROJECT {{i+1}}
              </div>
			  <div fxLayout="row" >
              <div *ngIf="!isView" class="h4 condo-red-text font-weight-600 cursor" [ngClass.lg]="'mr-20'" [ngClass.xl]="'mr-20'"
                [ngClass.md]="'mr-12'" [ngClass.sm]="'mr-12'" [ngClass.xs]="'mr-0'"
                (click)="editPortfolio(portfolio,i)">
                <mat-icon class="s-16">edit</mat-icon> EDIT
              </div>
              <div *ngIf="!isView" class="h4 condo-red-text font-weight-600 cursor" [ngClass.xl]="'mr-12'" [ngClass.lg]="'mr-12'"
                [ngClass.md]="'mr-12'" [ngClass.sm]="'mr-12'" [ngClass.xs]="'mr-0 ml-12'"
                (click)="deletePortfolio(portfolio,i)">
                <mat-icon class="s-16">delete</mat-icon> DELETE
              </div>
			  </div>
            </div>
            <div fxLayout="column" fxLayoutAlign="flex-start"> 
              <div fxLayout="row" fxLayout.xs="column" class="my-24" [ngClass.xs]="'mb-8'" fxLayoutAlign="start flex-start"
                fxLayoutAlign.xs="start" fxFlex="1 0 auto">
                <div fxFlex="30" fxFlex.sm="50" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                  <div class="h5 condo-gray-text mb-4">PROJECT NAME</div>
                  <div class="h4">{{portfolio.projectName}}</div>
                </div>
                <div fxFlex.xs="100">
                  <div class="h5 condo-gray-text mb-4">CITY</div>
                  <div class="h4">{{portfolio.city}}</div>
                </div>
              </div>
              <div fxLayout="row" class="my-16" fxLayoutAlign="start flex-start" fxFlex="1 0 auto">
                <div>
                  <div class="h5 condo-gray-text mb-4">DESCRIPTION</div>
                  <div class="line-height-26 h4">{{portfolio.description}}</div>
                </div>
              </div>
              <div fxLayout="row" fxLayout.xs="column" class="my-24" [ngClass.xs]="'mb-0 mt-0'"
                fxLayoutAlign="start flex-start" fxLayoutAlign.xs="start" fxFlex="1 0 auto">
                <div fxFlex="20" fxFlex.sm="50" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                  <div class="h5 condo-gray-text mb-4">CLIENT NAME</div>
                  <div class="h4">{{portfolio.clientName}}</div>
                </div>
                <div fxFlex="20" fxFlex.sm="30" fxFlex.xs="100" [ngClass.xs]="'mb-20'">
                  <div class="h5 condo-gray-text mb-4">DATE</div>
                  <div class="h4">{{portfolio.date | date:'MM/dd/y'}}</div>
                </div>
                <div fxFlex="20" fxFlex.sm="20" fxFlex.xs="100" [ngClass.xs]="'mb-16'">
                  <div class="h5 condo-gray-text mb-4">DURATION</div>
                  <div class="h4">{{portfolio.duration}} Days</div>
                </div>
                <div fxFlex="20">
                  <div class="h5 condo-gray-text mb-4">COST</div>
                  <div class="h4">{{portfolio.cost | currency:'CAD'}}</div>
                </div>
              </div>

              <div fxLayout="column">
                <div class="h5 condo-gray-text" [ngClass.xl]="'mt-24'" [ngClass.lg]="'mt-24'" [ngClass.md]="'mt-24'" [ngClass.sm]="'mt-24'"
                  [ngClass.xs]="'mt-8'" fxFlex="100">UPLOADED FILES</div>
              </div>


              <div fxLayout.lg="row" fxLayout.md="row" fxLayout.sm="row" fxLayout.xs="column" class="my-16"
                fxLayoutAlign.xs="start" fxLayoutAlign.lg="space-between flex-start" fxLayoutAlign.md="space-between flex-start"
                fxLayoutAlign.sm="space-between flex-start" fxFlex="1 0 auto">

                <div fxFlex.lg="100" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100" fxLayout.lg="row" fxLayout.md="row"
                  fxLayout.sm="row" fxLayout.xs="column" class="upload-button">

                  <div fxLayout="row" class="mb-12">
                    <div class="h4 line-height-28 mb-8" fxLayout="row" fxLayoutAlign="flex-start flex-start" fxFlex="1 0 auto">

                      <div>
                        <div *ngFor="let docAttachment of portfolio.portfolioFiles" class="" fxLayout="column"
                          (click)="fileClicked(docAttachment)">
                          <div>
                            <mat-icon class="s-16 font-weight-600 mat-icon mr-8" style="vertical-align: flex-start">
                              file_copy</mat-icon> <a class="cursor">{{docAttachment.fileName}}</a> <span
                              class="condo-gray-text ml-16">{{docAttachment.fileSize}}</span>
                          </div>
                        </div>
                        <div *ngIf="portfolio.portfolioFiles.length == 0" class="" fxLayout="row">
                          <div class="condo-gray-text text-italic text-flex-start">No attachments available</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div *ngIf="vendorDetails.vendorPortfolios.length > 2" class="mat-card mat-elevation-z">
            <div fxLayout="row" class="my-24" fxLayoutAlign="flex-start" fxFlex="1 0 auto">
              <a *ngIf="viewMoreClicked == false" class="font-weight-600 cursor" (click)="morePortfolio()">View More
                Projects</a>
              <a *ngIf="viewMoreClicked == true" class="font-weight-600 cursor" (click)="hidePortfolio()">View Less</a>
            </div>
          </div>
        </div>

        <div *ngIf="portfolioDetails.length == 0">
          <div class="mat-card mat-elevation-z pt-12 mr-24 font-weight-600" fxLayoutAlign="flex-start" fxFlex="1 0 auto">
            <span> No Portfolio to Show. </span>
          </div>
        </div>
      </mat-expansion-panel>
      <!-- Portfolio section ends -->


      <!-- Detailed Rating section starts -->
      <mat-expansion-panel #panel1 class="mt-24 mat-elevation-z" [(expanded)]="shouldExpandReview" id="info-banner"
        (afterExpand)="scrollToSection($event)">
        <mat-expansion-panel-header class="condo-red-300">
          <mat-panel-title class="h3 font-weight-600">
            REVIEWS AND RATINGS
            <div *ngIf="vendorRating != null" fxLayout="row" fxLayout.xs="row wrap" class="pt-4 ml-16">
              <div fxLayout="row" *ngFor="let rating of vendorRating.averageRating.ratingStar">
                <mat-icon *ngIf="rating == 'fullStar'" class="s-16 amber-fg">star</mat-icon>
                <mat-icon *ngIf="rating == 'halfStar'" class="s-16 amber-fg">star_half</mat-icon>
                <mat-icon *ngIf="rating == 'noStar'" class="s-16 amber-fg">star_border</mat-icon>
              </div>
              <div class="ml-8  h4 text-bold">{{vendorDetails.rating}}</div>
            </div>
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div fxLayout="row" fxLayoutAlign="space-between flex-start" class="mt-12">
          <div class="">
            <div class="h2 condo-gray-text"></div>
          </div>
          <div *ngIf="currentUser.userType == 1" fxLayout="row" fxLayout.xs="row wrap" >
            <div class="h5 condo-gray-text pt-8 pr-8"><em>Share your experience to help your community</em></div>
            <button mat-flat-button class="text-bold condo-red-400 cursor" (click)="openAddReviewDialog()" [ngClass.xs]="'mt-12'">
              <mat-icon class="s-16">add</mat-icon> ADD YOUR REVIEW
            </button>
          </div>
        </div>

        <div #ratingDetails class="mat-card mat-elevation-z project-list" [ngClass.xl]="'pt-4 mr-20 pb-24'" [ngClass.lg]="'pt-4 mr-20 pb-24'"
          [ngClass.md]="'pt-32 mr-28'" [ngClass.sm]="'pt-32 mr-0'" [ngClass.xs]="'pt-16 pb-0'">
          <div *ngIf="vendorRating != null" fxLayout="row wrap" fxLayout.sm="row wrap" fxLayout.xs="column"
            class="my-16">
            <div class="mx-16" fxFlex="20" [ngClass.md]="'mb-24'" [ngClass.sm]="'mb-16'" [ngClass.xs]="'mb-24'"
              *ngFor="let venRating of vendorRating.detailed">
              <div>
                <div class="h5 condo-gray-text mb-4">{{venRating.ratingCategory | uppercase}}</div>
                <div fxLayout="row" fxLayoutAlign="start flex-start" title="{{venRating.ratingDescription}}">
                  <div *ngFor="let rating of venRating.rating">
                    <mat-icon *ngIf="rating == 'fullStar'" class="s-20 amber-fg">star</mat-icon>
                    <mat-icon *ngIf="rating == 'halfStar'" class="s-20 amber-fg">star_half</mat-icon>
                    <mat-icon *ngIf="rating == 'noStar'" class="s-20 amber-fg">star_border</mat-icon>
                  </div>
                  <div class="ml-8 h2 text-bold">{{venRating.ratingValue}}</div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="mat-card mat-elevation-z pt-24" [ngClass.xs]="'pt-4'">


          <div class="mb-16 " fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="start"
            fxLayoutAlign="space-between flex-start" [ngClass.xl]="'mt-16'" [ngClass.lg]="'mt-16'" [ngClass.md]="'mt-16 mr-8'"
            [ngClass.sm]="' mt-16 mx-0'" [ngClass.xs]="'mt-4 mx-4'">
            <div class="" [ngClass.xs]="'mb-16'">
              <div class="h2 condo-gray-text">All Reviews</div>
            </div>
            <!-- Edit btn hided for version 1 -->
            <div fxLayout="row" fxLayout.xs="row wrap">
              <mat-button-toggle-group value="postedDate" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="end"
                fxLayoutAlign.xs="start">
                <div fxLayout="row" fxLayout.xs="row wrap" fxLayoutAlign="end flex-start" fxLayoutAlign.xs="start"
                  class="condo-sorting" [ngClass.xl]="'pr-20'" [ngClass.lg]="'pr-20'" [ngClass.md]="'pr-20'" [ngClass.sm]="'pr-0'"
                  [ngClass.xs]="'pr-0'">
                  <div fxLayout="row wrap" fxLayoutAlign="flex-start"
                    class="line-height-30  condo-gray-text font-weight-600" [ngClass.xl]="'mr-24'" [ngClass.lg]="'mr-24'"
                    [ngClass.md]="'mr-24'" [ngClass.sm]="'mr-24'" [ngClass.xs]="'mr-12'">SORT BY :</div>
                  <mat-button-toggle value='postedDate' class="mat-stroked-button mat-primary   active"
                    (click)="changeRatingSort('postedDate')" [ngClass.xl]="'mr-12'" [ngClass.lg]="'mr-12'" [ngClass.md]="'mr-12'"
                    [ngClass.sm]="'mr-12'" [ngClass.xs]="'mb-16 mr-16'">
                    DATE
                  </mat-button-toggle>
                  <mat-button-toggle value='rating' class="mat-stroked-button mat-primary"
                    (click)="changeRatingSort('rating')" [ngClass.xs]="'mb-16 mr-0'">
                    RATING
                  </mat-button-toggle>
                </div>
              </mat-button-toggle-group>
            </div>
          </div>



          <div fxLayout="row wrap" fxLayout.sm="column wrap" fxLayout.xs="column wrap" fxLayoutAlign="start top"
            fxLayoutAlign.sm="start" fxLayoutAlign.xs="start">
            <div *ngFor="let review of reviewData; let i = index" class="card-preview" [ngClass.xl]="'pr-16'" [ngClass.lg]="'pr-16'"
              [ngClass.md]="'pr-16'" [ngClass.sm]="'pr-0'" [ngClass.xs]="''">
              <div class="fuse-card">
                <div class="p-16" fxLayout="row wrap" fxLayoutAlign="space-between start">
                  <div class="pr-16">
                    <div class="h4 secondary-text mb-8 cursor">{{review.clientName}}</div>
                    <!-- <div class="review-block">

                      <div class="" style="border-bottom:1px solid #fff;padding-bottom:15px;" fxLayout="row"
                        fxLayoutAlign="start flex-start" fxLayout.sm="column" fxLayout.xs="column">

                        <div class="img-hover-vendor" [ngClass.xs]="'mb-12 '">
                          <img *ngIf="review.clientUserProfileImage == null || review.clientUserProfileImage == ''"
                            class="border-radius-100 w-80 h-80" src="assets/images/no-pic.jpg">
                          <img *ngIf="review.clientUserProfileImage != null && review.clientUserProfileImage != ''"
                            class="border-radius-100 w-80 h-80" [src]="review.clientUserProfileImage">
                        </div>

                        <div class="pr-16 ml-24" fxFlex="80" fxFlex.xs="100" [ngClass.sm]="'text-flex-start mt-12'"
                          [ngClass.xs]="'text-flex-start mt-12'" fxlayout="row wrap">
                          <div class="h4 condo-red-text text-bold">{{review.clientName}}
                          </div>
                        </div>
                      </div>


                      <div class="mt-16" fxLayout="row" fxLayoutAlign="start flex-start" fxLayout.sm="column"
                        fxLayout.xs="column">

                        <div fxLayout="column" fxFlex="10"><img class="avatar mr-0 mr-sm-16"
                            src="assets/images/no-pic.jpg"></div>

                        <div class="pr-16 ml-24" fxFlex="80" fxFlex.xs="100" [ngClass.sm]="'text-flex-start mt-12'"
                          [ngClass.xs]="'text-flex-start mt-12'" fxlayout="row wrap">
                          <div class="h4">{{review.clientOrganisationName}}
                          </div>

                        </div>
                      </div>
                    </div> -->


                    <div class="h5 secondary-text mb-8">{{review.clientOrganisationName}}</div>
                    <div fxLayoutAlign="start flex-start">
                      <div *ngFor="let rating of reviewRatingData[i]" fxLayout="row">
                        <mat-icon *ngIf="rating == 'fullStar'" class="s-20 amber-fg">star</mat-icon>
                        <mat-icon *ngIf="rating == 'halfStar'" class="s-20 amber-fg">star_half</mat-icon>
                        <mat-icon *ngIf="rating == 'noStar'" class="s-20 amber-fg">star_border</mat-icon>
                      </div>
                      <div class="ml-8 h3 text-bold">{{review.rating}}</div>
                    </div>
                  </div>
                  <div class="" fxLayout="column" fxLayoutAlign="space-between end">
                    <div class="h6 secondary-text mb-8">{{review.createdAt | date:'d MMMM, y'}}</div>
                    <!-- <div *ngIf="!isView" class="h6 condo-red-text text-bold"><a>Reply to Review</a></div> -->
                  </div>
                </div>
                <div class="p-16 pt-0 line-height-1.75">
                  {{review.reviewComments}}
                </div>

                <div class="p-8 pt-0" fxLayout="row" fxLayoutAlign="start flex-start">
                  <button *ngIf="isView || (review.replyComments != null && review.replyComments != '')" mat-button color="accent" (click)="openViewReviewDialog(review)" class="text-bold">Read More >> </button>
                  <button *ngIf="!isView && (review.replyComments == null || review.replyComments == '')" mat-button color="accent" (click)="openViewReviewDialog(review)" class="text-bold">Reply to Review</button>
                </div>
              </div>
            </div>
          </div>
        </div>


      </mat-expansion-panel>
      <!-- Detailed Rating section ends -->


    </mat-accordion>
    <!-- Accordion ends -->
  </div>
</div>
<!-- </div> -->

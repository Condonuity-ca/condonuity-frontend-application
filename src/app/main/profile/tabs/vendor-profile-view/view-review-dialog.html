<div fxLayout="row" fxLayoutAlign="space-between center">
  <div mat-dialog-title class="pl-12">{{review.clientName}}</div>
  <mat-dialog-actions align="end" class="mb-0">
    <button mat-button mat-dialog-close style="margin-top:-30px;min-width: 28px !important;" class="p-0">
      <mat-icon class="s-24 condo-red-text" mat-dialog-close>close</mat-icon>
    </button>
  </mat-dialog-actions>
</div>

<mat-dialog-content class="mat-typography">

  <div *ngIf="reviewEditState === 1 && shouldShowReplyOption === false" class="mb-16 " fxLayout="row"
    fxLayout.xs="column" fxLayoutAlign.xs="start" fxLayoutAlign="end end" [ngClass.lg]="''" [ngClass.md]="'mx-24'"
    [ngClass.sm]="'mx-24'" [ngClass.xs]="''">
    <div fxLayout="row" fxLayout.xs="column">
      <mat-button-toggle-group value="postedDate" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="end"
        fxLayoutAlign.xs="start">


        <a style="color:#d84d34 !important" (click)="updateReview()" class="cursor condo-red-text">
          <mat-icon class="s-16">edit</mat-icon> EDIT REVIEW
        </a>
      </mat-button-toggle-group>
    </div>
  </div>


  <div *ngIf="reviewEditState == 1 || reviewEditState == 3" class="profile-box info-box general" fxLayout="column">
    <form fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" name="comInfoEditform"
      [formGroup]="comInfoEditform">

       <div class="mb-16" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
        <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-16'" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <div class="h5 condo-gray-text">PROFESSIONALISM</div>
          </div>
        </div>
        <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-24'" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">

          <div>
            <span *ngFor="let rating of pRatingStars">
              <mat-icon *ngIf="rating == 'fullStar'" class="s-24 amber-fg">star</mat-icon>
              <mat-icon *ngIf="rating == 'halfStar'" class="s-24 amber-fg">star_half</mat-icon>
              <mat-icon *ngIf="rating == 'noStar'" class="s-24 amber-fg">star_border</mat-icon>
            </span>
          </div>
        </div>
      </div>


      <div class="mb-16" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
        <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-16'" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <div class="h5 condo-gray-text">ACCURACY</div>
          </div>
        </div>
        <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-24'" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">

          <div>
            <span *ngFor="let rating of aRatingStars">
              <mat-icon *ngIf="rating == 'fullStar'" class="s-24 amber-fg">star</mat-icon>
              <mat-icon *ngIf="rating == 'halfStar'" class="s-24 amber-fg">star_half</mat-icon>
              <mat-icon *ngIf="rating == 'noStar'" class="s-24 amber-fg">star_border</mat-icon>
            </span>
          </div>
        </div>
      </div>


      <div class="mb-16" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
        <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-16'" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <div class="h5 condo-gray-text">RESPONSIVENESS</div>
          </div>
        </div>
        <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-24'" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <span *ngFor="let rating of rRatingStars">
              <mat-icon *ngIf="rating == 'fullStar'" class="s-24 amber-fg">star</mat-icon>
              <mat-icon *ngIf="rating == 'halfStar'" class="s-24 amber-fg">star_half</mat-icon>
              <mat-icon *ngIf="rating == 'noStar'" class="s-24 amber-fg">star_border</mat-icon>
            </span>
          </div>
        </div>
      </div>


      <div class="16" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
        <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-16'" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <div class="h5 condo-gray-text">QUALITY</div>
          </div>
        </div>
        <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-24'" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <span *ngFor="let rating of qRatingStars">
              <mat-icon *ngIf="rating == 'fullStar'" class="s-24 amber-fg">star</mat-icon>
              <mat-icon *ngIf="rating == 'halfStar'" class="s-24 amber-fg">star_half</mat-icon>
              <mat-icon *ngIf="rating == 'noStar'" class="s-24 amber-fg">star_border</mat-icon>
            </span>
          </div>
        </div>
      </div>

      <div class="mt-16" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
        <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-16'" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div>
            <div class="h5 condo-gray-text">ENGAGEMENT DATE</div>
          </div>
        </div>
        <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.xl]="'pr-16 ml-24'" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
          [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
          <div class="h4 line-height-26">
            <span>{{review.formattedEngagementDate}}</span>
          </div>
        </div>
      </div>


      <div class="mt-24 pt-24 pb-12 " fxFlex="100" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-16'"
        [ngClass.md]="'pr-16 ml-16'" [ngClass.sm]="'pr-16 ml-16'" [ngClass.xs]="'mb-4'"
        style="border-top:1px dashed #ccc;">
        <div>
          <div class="h5 condo-gray-text">COMMENTS</div>
          <div class="h4 line-height-26"><span>{{review.reviewComments}}</span></div>
        </div>
      </div>


      <div *ngIf="shouldShowReplyOption == false" fxFlex="1 0 auto" class="ml-24 pt-16 pl-24 pb-16"
        style="background:#f5f5f5;border-radius:6px;">
        <div class="h5 condo-red-text">CONTRACTOR REPLY</div>
        <div class="h4" style="" fxLayoutAlign="start start"><span>{{review.replyComments}}</span></div>
      </div>

      <div *ngIf="shouldShowReplyOption" fxLayout="columm" fxLayout.sm="column" fxLayout.xs="column"
        fxLayoutAlign="start center" fxLayoutAlign.sm="start" fxLayoutAlign.xs="start" fxFlex="100" class="pl-16">
        <mat-form-field appearance="outline" fxFlex="100" class="">
          <mat-label>Your Comments </mat-label>
          <textarea formControlName="vendorReply" matInput type="text" max-rows="16" style="height:60px;"></textarea>
        </mat-form-field>
      </div>
      <div *ngIf="shouldShowReplyOption" class="h4 condo-red-text mt-0" fxLayoutAlign="end end">
        <button mat-button mat-flat-button mat-accent (click)="replyClientReview()" color="accent">REPLY</button>
      </div>
    </form>
  </div>




  <div *ngIf="reviewEditState === 2" class="profile-box info-box general" fxLayout="column">
    <form fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" name="comInfoEditform"
      [formGroup]="comInfoEditform">


      <div>
        <div class="" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
          <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <div class="h5 condo-gray-text">PROFESSIONALISM</div>
            </div>
          </div>
          <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <fieldset class="rating">
                <input type="radio" [checked]="pRatingValue===5" (change)="ratingUpdated($event)" id="star5"
                  name="prating" value="5" /><label class="full" for="star5"></label>
                <input type="radio" [checked]="pRatingValue===4.5" (change)="ratingUpdated($event)" id="star4half"
                  name="prating" value="4.5" /><label class="half" for="star4half"></label>
                <input type="radio" [checked]="pRatingValue===4" (change)="ratingUpdated($event)" id="star4"
                  name="prating" value="4" /><label class="full" for="star4"></label>
                <input type="radio" [checked]="pRatingValue===3.5" (change)="ratingUpdated($event)" id="star3half"
                  name="prating" value="3.5" /><label class="half" for="star3half"></label>
                <input type="radio" [checked]="pRatingValue===3" (change)="ratingUpdated($event)" id="star3"
                  name="prating" value="3" /><label class="full" for="star3"></label>
                <input type="radio" [checked]="pRatingValue===2.5" (change)="ratingUpdated($event)" id="star2half"
                  name="prating" value="2.5" /><label class="half" for="star2half"></label>
                <input type="radio" [checked]="pRatingValue===2" (change)="ratingUpdated($event)" id="star2"
                  name="prating" value="2" /><label class="full" for="star2"></label>
                <input type="radio" [checked]="pRatingValue===1.5" (change)="ratingUpdated($event)" id="star1half"
                  name="prating" value="1.5" /><label class="half" for="star1half"></label>
                <input type="radio" [checked]="pRatingValue===1" (change)="ratingUpdated($event)" id="star1"
                  name="prating" value="1" /><label class="full" for="star1"></label>
                <input type="radio" [checked]="pRatingValue===.5" (change)="ratingUpdated($event)" id="starhalf"
                  name="prating" value="0.5" /><label class="half" for="starhalf"></label>
              </fieldset>
            </div>
          </div>
        </div>


        <div class="" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
          <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <div class="h5 condo-gray-text">ACCURACY</div>
            </div>
          </div>
          <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <fieldset class="rating">
                <input type="radio" [checked]="aRatingValue===5" (change)="ratingUpdated($event)" id="astar5"
                  name="arating" value="5" /><label class="full" for="astar5"></label>
                <input type="radio" [checked]="aRatingValue===4.5" (change)="ratingUpdated($event)" id="astar4half"
                  name="arating" value="4.5" /><label class="half" for="astar4half"></label>
                <input type="radio" [checked]="aRatingValue===4" (change)="ratingUpdated($event)" id="astar4"
                  name="arating" value="4" /><label class="full" for="astar4"></label>
                <input type="radio" [checked]="aRatingValue===3.5" (change)="ratingUpdated($event)" id="astar3half"
                  name="arating" value="3.5" /><label class="half" for="astar3half"></label>
                <input type="radio" [checked]="aRatingValue===3" (change)="ratingUpdated($event)" id="astar3"
                  name="arating" value="3" /><label class="full" for="astar3"></label>
                <input type="radio" [checked]="aRatingValue===2.5" (change)="ratingUpdated($event)" id="astar2half"
                  name="arating" value="2.5" /><label class="half" for="astar2half"></label>
                <input type="radio" [checked]="aRatingValue===2" (change)="ratingUpdated($event)" id="astar2"
                  name="arating" value="2" /><label class="full" for="astar2"></label>
                <input type="radio" [checked]="aRatingValue===1.5" (change)="ratingUpdated($event)" id="astar1half"
                  name="arating" value="1.5" /><label class="half" for="astar1half"></label>
                <input type="radio" [checked]="aRatingValue===1" (change)="ratingUpdated($event)" id="astar1"
                  name="arating" value="1" /><label class="full" for="astar1"></label>
                <input type="radio" [checked]="aRatingValue===.5" (change)="ratingUpdated($event)" id="astarhalf"
                  name="arating" value="0.5" /><label class="half" for="astarhalf"></label>
              </fieldset>
            </div>
          </div>
        </div>


        <div class="" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
          <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <div class="h5 condo-gray-text">RESPONSIVENESS</div>
            </div>
          </div>
          <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <fieldset class="rating">

                <input type="radio" [checked]="rRatingValue===5" (change)="ratingUpdated($event)" id="rstar5"
                  name="rrating" value="5" /><label class="full" for="rstar5"></label>
                <input type="radio" [checked]="rRatingValue===4.5" (change)="ratingUpdated($event)" id="rstar4half"
                  name="rrating" value="4.5" /><label class="half" for="rstar4half"></label>
                <input type="radio" [checked]="rRatingValue===4" (change)="ratingUpdated($event)" id="rstar4"
                  name="rrating" value="4" /><label class="full" for="rstar4"></label>
                <input type="radio" [checked]="rRatingValue===3.5" (change)="ratingUpdated($event)" id="rstar3half"
                  name="rrating" value="3.5" /><label class="half" for="rstar3half"></label>
                <input type="radio" [checked]="rRatingValue===3" (change)="ratingUpdated($event)" id="rstar3"
                  name="rrating" value="3" /><label class="full" for="rstar3"></label>
                <input type="radio" [checked]="rRatingValue===2.5" (change)="ratingUpdated($event)" id="rstar2half"
                  name="rrating" value="2.5" /><label class="half" for="rstar2half"></label>
                <input type="radio" [checked]="rRatingValue===2" (change)="ratingUpdated($event)" id="rstar2"
                  name="rrating" value="2" /><label class="full" for="rstar2"></label>
                <input type="radio" [checked]="rRatingValue===1.5" (change)="ratingUpdated($event)" id="rstar1half"
                  name="rrating" value="1.5" /><label class="half" for="rstar1half"></label>
                <input type="radio" [checked]="rRatingValue===1" (change)="ratingUpdated($event)" id="rstar1"
                  name="rrating" value="1" /><label class="full" for="rstar1"></label>
                <input type="radio" [checked]="rRatingValue===.5" (change)="ratingUpdated($event)" id="rstarhalf"
                  name="rrating" value="0.5" /><label class="half" for="rstarhalf"></label>

              </fieldset>
            </div>
          </div>
        </div>

        <div class="" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutAlign.xs="start">
          <div class="" fxFlex="35" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-16'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <div class="h5 condo-gray-text">QUALITY</div>
            </div>
          </div>
          <div class="" fxFlex="55" fxFlex.xs="100" [ngClass.lg]="'pr-16 ml-24'" [ngClass.md]="'pr-16 ml-24'"
            [ngClass.sm]="'pr-16 ml-24'" [ngClass.xs]="'mb-16'">
            <div>
              <fieldset class="rating">
                <input type="radio" [checked]="qRatingValue===5" (change)="ratingUpdated($event)" id="qstar5"
                  name="qrating" value="5" /><label class="full" for="qstar5"></label>
                <input type="radio" [checked]="qRatingValue===4.5" (change)="ratingUpdated($event)" id="qstar4half"
                  name="qrating" value="4.5" /><label class="half" for="qstar4half"></label>
                <input type="radio" [checked]="qRatingValue===4" (change)="ratingUpdated($event)" id="qstar4"
                  name="qrating" value="4" /><label class="full" for="qstar4"></label>
                <input type="radio" [checked]="qRatingValue===3.5" (change)="ratingUpdated($event)" id="qstar3half"
                  name="qrating" value="3.5" /><label class="half" for="qstar3half"></label>
                <input type="radio" [checked]="qRatingValue===3" (change)="ratingUpdated($event)" id="qstar3"
                  name="qrating" value="3" /><label class="full" for="qstar3"></label>
                <input type="radio" [checked]="qRatingValue===2.5" (change)="ratingUpdated($event)" id="qstar2half"
                  name="qrating" value="2.5" /><label class="half" for="qstar2half"></label>
                <input type="radio" [checked]="qRatingValue===2" (change)="ratingUpdated($event)" id="qstar2"
                  name="qrating" value="2" /><label class="full" for="qstar2"></label>
                <input type="radio" [checked]="qRatingValue===1.5" (change)="ratingUpdated($event)" id="qstar1half"
                  name="qrating" value="1.5" /><label class="half" for="qstar1half"></label>
                <input type="radio" [checked]="qRatingValue===1" (change)="ratingUpdated($event)" id="qstar1"
                  name="qrating" value="1" /><label class="full" for="qstar1"></label>
                <input type="radio" [checked]="qRatingValue===.5" (change)="ratingUpdated($event)" id="qstarhalf"
                  name="qrating" value="0.5" /><label class="half" for="qstarhalf"></label>

              </fieldset>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-8" fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutAlign="start center"
          fxLayoutAlign.sm="start" fxLayoutAlign.xs="start" fxFlex="1 0 auto">
          <mat-form-field appearance="outline" fxFlex="100" class="px-16">
            <mat-label>Engagement Date</mat-label>
            <input required matInput [matDatepicker]="engagementDate" formControlName="engagementDate" placeholder="Choose a date" readonly>
            <mat-datepicker-toggle matSuffix [for]="engagementDate"></mat-datepicker-toggle>
            <mat-datepicker #engagementDate></mat-datepicker>
            <mat-error>Date format is invalid</mat-error>
          </mat-form-field>
      </div>


      <div fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutAlign="start center"
        fxLayoutAlign.sm="start" fxLayoutAlign.xs="start" fxFlex="1 0 auto" class="mt-16">
        <mat-form-field appearance="outline" fxFlex="100" class="px-8">
          <mat-label>Comments</mat-label>
          <textarea formControlName="userReviewInput" matInput max-rows="6" style="height:70px;"></textarea>
        </mat-form-field>
      </div>
    </form>
  </div>




  <div *ngIf="reviewEditState === 2" class="mt-4 mb-16 " fxLayout="row" fxLayout.xs="column" fxLayoutAlign.xs="start"
    fxLayoutAlign="end end" [ngClass.lg]="''" [ngClass.md]="'mx-24'" [ngClass.sm]="'mx-24'"
    [ngClass.xs]="''">
    <div class="" fxLayout="row" fxLayout.xs="column" [ngClass.xs]="'mb-16 '">
      <button mat-button (click)="deleteVendorReview()"  class="fuse-navy-500 " [ngClass.xl]="'ml-16 mr-16'" [ngClass.lg]="'ml-16 mr-16'" [ngClass.md]="'ml-16 mr-16'" [ngClass.sm]="'ml-16 mr-16'" [ngClass.xs]="'mr-16'">DELETE</button>
    </div>
    <div fxLayout="row" fxLayout.xs="column">
      <mat-button-toggle-group value="postedDate" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="end"
        fxLayoutAlign.xs="start">
        <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="end center" fxLayoutAlign.xs="start" class=" pr-20">
          <!-- <button mat-button mat-dialog-close class="fuse-navy-50 mr-16">CANCEL</button> -->
          <button [disabled]="comInfoEditform.invalid" mat-button mat-flat-button mat-accent (click)="updateVendorReview()" color="accent">UPDATE</button>
        </div>
      </mat-button-toggle-group>
    </div>
  </div>



</mat-dialog-content>
